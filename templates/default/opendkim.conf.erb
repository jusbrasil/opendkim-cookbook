# This is a basic configuration that can easily be adapted to suit a standard
# installation. For more advanced options, see opendkim.conf(5) and/or
# /usr/share/doc/opendkim/examples/opendkim.conf.sample.

# Log to syslog
Syslog      yes
# Required to use local socket with MTAs that access the socket as a non-
# privileged user (e.g. Postfix)
UMask     002

# Sign for example.com with key in /etc/mail/dkim.key using
# selector '2007' (e.g. 2007._domainkey.example.com)
#Domain     example.com
#KeyFile    /etc/mail/dkim.key
#Selector   2007
Domain      <%= node['opendkim']['domain'] %>
KeyFile     <%= node['opendkim']['keyfile'] %>
Selector    <%= node['opendkim']['selector'] %>

Socket      <%= node['opendkim']['socket'] %>

InternalHosts refile:/etc/opendkim/TrustedHosts

SubDomains <%= node['opendkim']['subdomains'] %>

# Commonly-used options; the commented-out versions show the defaults.
#Canonicalization simple
#Mode     sv
#SubDomains   no
#ADSPDiscard    no

Canonicalization relaxed/relaxed
OversignHeaders From,Subject,To
SignHeaders *,+Message-ID,+MIME-Version,+Content-Type

# Required to run with systemctl
PidFile   /var/run/opendkim/opendkim.pid
